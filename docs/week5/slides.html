<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <title>Week 5 Slides</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.2.1/reset.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.2.1/reveal.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.2.1/theme/dracula.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.2.1/plugin/highlight/monokai.min.css">

  <style>
    /* String memory cell row */
    .str-mem {
      display: flex;
      flex-wrap: nowrap;
      justify-content: center;
      gap: 1px;
      margin: 10px auto;
      font-family: monospace;
      font-size: 0.65em;
    }
    .str-cell {
      border: 2px solid #6272a4;
      padding: 8px 6px;
      text-align: center;
      border-radius: 3px;
      background: #44475a;
      min-width: 36px;
    }
    .str-val {
      font-size: 1.15em;
      color: #f8f8f2;
    }
    .str-idx {
      font-size: 0.7em;
      color: #6272a4;
      margin-top: 2px;
    }
    /* Color variants */
    .c-str   { border-color: #ff79c6; }
    .c-str1  { border-color: #50fa7b; }
    .c-null  { background: rgba(255, 85, 85, 0.2); border-color: #ff5555; }
    .c-space { background: rgba(139, 233, 253, 0.2); border-color: #8be9fd; }
    .c-m2    { border-color: #8be9fd; }
    .c-m3    { border-color: #ffb86c; }
    .c-words { border-color: #ff79c6; }
    .c-over  { border-color: #50fa7b; }
    .c-dim   { opacity: 0.35; }

    /* Terminal output box */
    .term-box {
      background: #1e1f29;
      border: 1px solid #6272a4;
      border-radius: 8px;
      padding: 14px 20px;
      text-align: left;
      font-family: monospace;
      font-size: 0.6em;
      line-height: 1.7;
      max-width: 750px;
      margin: 12px auto;
      color: #f8f8f2;
    }
    .term-box .t-label {
      color: #6272a4;
      font-style: italic;
    }
    .term-box .t-hi {
      color: #50fa7b;
    }
    .term-box .t-new {
      color: #ffb86c;
    }

    /* Explanation callout */
    .explanation {
      color: #ffb86c;
      font-size: 0.7em;
      margin-top: 10px;
    }

    /* Label strip under memory cells */
    .str-label-strip {
      display: flex;
      justify-content: center;
      gap: 20px;
      font-size: 0.6em;
      margin-top: 6px;
    }

    /* Comparison table */
    .cmp-table {
      margin: 0 auto;
      border-collapse: collapse;
      font-size: 0.6em;
      border: 1px solid #6272a4;
    }
    .cmp-table th, .cmp-table td {
      padding: 10px 16px;
      text-align: center;
      border: 1px solid #6272a4 !important;
    }
    .cmp-table th {
      background: #44475a;
      color: #8be9fd;
    }
    .cmp-table td {
      font-family: monospace;
    }
  </style>
</head>

<body>
  <div class="reveal">
    <div class="slides">
      <!-- Title -->
      <section>
        <h2>NTU SC1008 Tutorial</h2>
        <h3>Week 5 Slides</h3>
        <p>Pu Fanyi</p>
        <p><a href="https://pufanyi.com">pufanyi.com</a></p>
        <p><a href="mailto:FPU001@e.ntu.edu.sg">FPU001@e.ntu.edu.sg</a></p>
      </section>

      <!-- ==================== test.c: String Memory Layout ==================== -->
      <section>
        <section>
          <h2>String Memory Layout</h2>
          <h4>Understanding <code>\0</code> in C Strings</h4>
        </section>

        <!-- test.c code -->
        <section>
          <h3>The Code</h3>
          <pre style="font-size: 0.45em;"><code class="language-c" data-trim data-line-numbers>
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;

int main() {
  char str1[] = "password";
  char str[6] = "Hello";
  printf("%s\n", str);
  printf("strlen(str) = %lu\n", strlen(str));
  str[1] = '\0';
  printf("%s\n", str);
  printf("strlen(str) = %lu\n", strlen(str));
  str[1] = 'e';
  str[5] = ' ';
  printf("%s\n", str);
  printf("strlen(str) = %lu\n", strlen(str));
  return 0;
}
          </code></pre>
        </section>

        <!-- Initialization -->
        <section>
          <h3>Initialization</h3>
          <pre style="font-size: 0.5em;"><code class="language-c" data-trim>
char str1[] = "password";   // 9 bytes (8 chars + '\0')
char str[6] = "Hello";      // 6 bytes (5 chars + '\0')
          </code></pre>
          <p style="font-size: 0.65em; color: #8be9fd; margin-top: 15px;">On the stack, they sit next to each other:</p>
          <div class="str-mem" style="margin-top: 15px;">
            <div class="str-cell c-str"><div class="str-val">H</div><div class="str-idx">[0]</div></div>
            <div class="str-cell c-str"><div class="str-val">e</div><div class="str-idx">[1]</div></div>
            <div class="str-cell c-str"><div class="str-val">l</div><div class="str-idx">[2]</div></div>
            <div class="str-cell c-str"><div class="str-val">l</div><div class="str-idx">[3]</div></div>
            <div class="str-cell c-str"><div class="str-val">o</div><div class="str-idx">[4]</div></div>
            <div class="str-cell c-null"><div class="str-val">\0</div><div class="str-idx">[5]</div></div>
            <div class="str-cell c-str1"><div class="str-val">p</div><div class="str-idx">[0]</div></div>
            <div class="str-cell c-str1"><div class="str-val">a</div><div class="str-idx">[1]</div></div>
            <div class="str-cell c-str1"><div class="str-val">s</div><div class="str-idx">[2]</div></div>
            <div class="str-cell c-str1"><div class="str-val">s</div><div class="str-idx">[3]</div></div>
            <div class="str-cell c-str1"><div class="str-val">w</div><div class="str-idx">[4]</div></div>
            <div class="str-cell c-str1"><div class="str-val">o</div><div class="str-idx">[5]</div></div>
            <div class="str-cell c-str1"><div class="str-val">r</div><div class="str-idx">[6]</div></div>
            <div class="str-cell c-str1"><div class="str-val">d</div><div class="str-idx">[7]</div></div>
            <div class="str-cell c-null"><div class="str-val">\0</div><div class="str-idx">[8]</div></div>
          </div>
          <div class="str-label-strip">
            <span style="color: #ff79c6;">&#9608; str (6 bytes)</span>
            <span style="color: #50fa7b;">&#9608; str1 (9 bytes)</span>
            <span style="color: #ff5555;">&#9608; \0 (null terminator)</span>
          </div>
        </section>

        <!-- Step 1: printf str → "Hello" -->
        <section>
          <h3>Step 1: Print <code>str</code></h3>
          <pre style="font-size: 0.5em;"><code class="language-c" data-trim>
printf("%s\n", str);               // Hello
printf("strlen(str) = %lu\n", strlen(str));  // 5
          </code></pre>
          <p style="font-size: 0.65em; margin-top: 12px;">
            <code>printf</code> reads from <code>str[0]</code> until it hits <code style="color:#ff5555;">\0</code> at <code>str[5]</code>:
          </p>
          <div class="str-mem">
            <div class="str-cell c-str"><div class="str-val" style="color:#50fa7b;">H</div><div class="str-idx">[0]</div></div>
            <div class="str-cell c-str"><div class="str-val" style="color:#50fa7b;">e</div><div class="str-idx">[1]</div></div>
            <div class="str-cell c-str"><div class="str-val" style="color:#50fa7b;">l</div><div class="str-idx">[2]</div></div>
            <div class="str-cell c-str"><div class="str-val" style="color:#50fa7b;">l</div><div class="str-idx">[3]</div></div>
            <div class="str-cell c-str"><div class="str-val" style="color:#50fa7b;">o</div><div class="str-idx">[4]</div></div>
            <div class="str-cell c-null"><div class="str-val">\0</div><div class="str-idx">STOP</div></div>
            <div class="str-cell c-str1 c-dim"><div class="str-val">p</div></div>
            <div class="str-cell c-str1 c-dim"><div class="str-val">a</div></div>
            <div class="str-cell c-str1 c-dim"><div class="str-val">s</div></div>
            <div class="str-cell c-str1 c-dim"><div class="str-val">...</div></div>
          </div>
          <div class="term-box">
            Hello<br>
            strlen(str) = 5
          </div>
          <p class="explanation"><code>strlen</code> counts characters before <code>\0</code> &mdash; 5 chars, not including the terminator.</p>
        </section>

        <!-- Step 2: str[1] = '\0' -->
        <section>
          <h3>Step 2: <code>str[1] = '\0'</code></h3>
          <pre style="font-size: 0.5em;"><code class="language-c" data-trim>
str[1] = '\0';
printf("%s\n", str);               // H
printf("strlen(str) = %lu\n", strlen(str));  // 1
          </code></pre>
          <p style="font-size: 0.65em; margin-top: 12px;">We insert a <code style="color:#ff5555;">\0</code> at index 1 &mdash; the string is now truncated early:</p>
          <div class="str-mem">
            <div class="str-cell c-str"><div class="str-val" style="color:#50fa7b;">H</div><div class="str-idx">[0]</div></div>
            <div class="str-cell c-null"><div class="str-val">\0</div><div class="str-idx">[1] NEW</div></div>
            <div class="str-cell c-str c-dim"><div class="str-val">l</div><div class="str-idx">[2]</div></div>
            <div class="str-cell c-str c-dim"><div class="str-val">l</div><div class="str-idx">[3]</div></div>
            <div class="str-cell c-str c-dim"><div class="str-val">o</div><div class="str-idx">[4]</div></div>
            <div class="str-cell c-null c-dim"><div class="str-val">\0</div><div class="str-idx">[5]</div></div>
            <div class="str-cell c-str1 c-dim"><div class="str-val">p</div></div>
            <div class="str-cell c-str1 c-dim"><div class="str-val">a</div></div>
            <div class="str-cell c-str1 c-dim"><div class="str-val">...</div></div>
          </div>
          <div class="term-box">
            H<br>
            strlen(str) = 1
          </div>
          <p class="explanation">The bytes <code>'l','l','o','\0'</code> are still in memory &mdash; but <code>printf</code>/<code>strlen</code> stop at the first <code>\0</code>.</p>
        </section>

        <!-- Step 3: str[1]='e', str[5]=' ' -->
        <section>
          <h3>Step 3: <code>str[1]='e'</code>, <code>str[5]=' '</code></h3>
          <pre style="font-size: 0.5em;"><code class="language-c" data-trim>
str[1] = 'e';   // restore 'e'
str[5] = ' ';   // overwrite the ORIGINAL '\0' with a space!
          </code></pre>
          <div class="str-mem" style="margin-top: 15px;">
            <div class="str-cell c-str"><div class="str-val">H</div><div class="str-idx">[0]</div></div>
            <div class="str-cell c-str"><div class="str-val" style="color:#50fa7b;">e</div><div class="str-idx">[1]</div></div>
            <div class="str-cell c-str"><div class="str-val">l</div><div class="str-idx">[2]</div></div>
            <div class="str-cell c-str"><div class="str-val">l</div><div class="str-idx">[3]</div></div>
            <div class="str-cell c-str"><div class="str-val">o</div><div class="str-idx">[4]</div></div>
            <div class="str-cell c-space"><div class="str-val">' '</div><div class="str-idx">[5]</div></div>
            <div class="str-cell c-str1"><div class="str-val">p</div><div class="str-idx">[0]</div></div>
            <div class="str-cell c-str1"><div class="str-val">a</div><div class="str-idx">[1]</div></div>
            <div class="str-cell c-str1"><div class="str-val">s</div><div class="str-idx">[2]</div></div>
            <div class="str-cell c-str1"><div class="str-val">s</div><div class="str-idx">[3]</div></div>
            <div class="str-cell c-str1"><div class="str-val">w</div><div class="str-idx">[4]</div></div>
            <div class="str-cell c-str1"><div class="str-val">o</div><div class="str-idx">[5]</div></div>
            <div class="str-cell c-str1"><div class="str-val">r</div><div class="str-idx">[6]</div></div>
            <div class="str-cell c-str1"><div class="str-val">d</div><div class="str-idx">[7]</div></div>
            <div class="str-cell c-null"><div class="str-val">\0</div><div class="str-idx">STOP</div></div>
          </div>
          <p style="font-size: 0.6em; color: #ff5555; margin-top: 8px;">
            No <code>\0</code> inside <code>str</code>! &rarr; <code>printf</code> reads past <code>str</code> into <code>str1</code>!
          </p>
          <div class="term-box">
            Hello password<br>
            strlen(str) = 14
            <div class="t-label" style="margin-top:5px;">5 (Hello) + 1 (space) + 8 (password) = 14</div>
          </div>
        </section>

        <!-- test.c: Complete Output -->
        <section>
          <h3>Complete Output</h3>
          <div class="term-box" style="font-size: 0.7em;">
            Hello<br>
            strlen(str) = 5<br>
            H<br>
            strlen(str) = 1<br>
            Hello password<br>
            strlen(str) = 14
          </div>
          <p class="explanation">Key lesson: <code>\0</code> is the <strong>only</strong> thing that defines where a C string ends.</p>
        </section>
      </section>

      <!-- Q1 Placeholder -->
      <section>
        <h2>Question 1</h2>
        <p style="color: #6272a4;">(To be added)</p>
      </section>

      <!-- Q2 Placeholder -->
      <section>
        <h2>Question 2</h2>
        <p style="color: #6272a4;">(To be added)</p>
      </section>

      <!-- ==================== Question 3 ==================== -->
      <section>
        <section>
          <h2>Question 3</h2>
          <h4>Implement <code>stringcmp</code></h4>
        </section>

        <!-- What is strcmp -->
        <section>
          <h3><code>strcmp</code></h3>
          <pre style="font-size: 0.5em;"><code class="language-c" data-trim>
#include &lt;string.h&gt;
int strcmp(const char *s1, const char *s2);
          </code></pre>
          <p style="font-size: 0.65em; margin-top: 15px;">Compares two strings <strong>character by character</strong> (by ASCII value).</p>
          <p style="font-size: 0.6em; margin-top: 10px;">Returns the difference of the <strong>first mismatched</strong> characters: <code style="color:#8be9fd;">*s1 - *s2</code></p>
          <table class="cmp-table fragment" style="font-size: 0.55em; margin-top: 15px;">
            <tr>
              <th>Return value</th>
              <th>Meaning</th>
              <th>Example</th>
            </tr>
            <tr>
              <td style="color:#50fa7b;">&lt; 0</td>
              <td><code>s1</code> &lt; <code>s2</code></td>
              <td><code>strcmp("abc", "abd")</code> &rarr; <code>'c' - 'd'</code> = <span style="color:#50fa7b;">-1</span></td>
            </tr>
            <tr>
              <td style="color:#8be9fd;">0</td>
              <td><code>s1</code> == <code>s2</code></td>
              <td><code>strcmp("abc", "abc")</code> &rarr; <span style="color:#8be9fd;">0</span></td>
            </tr>
            <tr>
              <td style="color:#ff79c6;">&gt; 0</td>
              <td><code>s1</code> &gt; <code>s2</code></td>
              <td><code>strcmp("abd", "abc")</code> &rarr; <code>'d' - 'c'</code> = <span style="color:#ff79c6;">1</span></td>
            </tr>
          </table>
          <p class="explanation fragment">Comparison is based on <strong>ASCII values</strong>: <code>'A'</code>=65, <code>'a'</code>=97, <code>'0'</code>=48</p>
        </section>
      </section>

      <!-- ==================== Question 4 ==================== -->
      <section>
        <!-- Q4 Title -->
        <section>
          <h2>Question 4</h2>
          <h4>Strings, Pointers &amp; Memory</h4>
        </section>

        <!-- Q4 Code -->
        <section>
          <h3>The Code</h3>
          <pre style="font-size: 0.36em;"><code class="language-c" data-trim data-line-numbers>
#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#define M1 "How are ya, sweetie?"
char M2[40] = "Beat the clock.";
char *M3 = "chat";

int main() {
  char words[80], *p;
  printf(M1);
  puts(M1);
  puts(M2);
  puts(M2 + 1);
  fgets(words, 80, stdin);  /* user inputs : win a toy. */
  if (p = strchr(words, '\n')) *p = '\0';
  puts(words);
  scanf("%s", words + 6);   /* user inputs : snoopy. */
  puts(words);
  words[3] = '\0';
  puts(words);
  while (*M3) puts(M3++);
  puts(--M3);
  puts(--M3);
  M3 = M1;
  puts(M3);
  return 0;
}
          </code></pre>
        </section>

        <!-- Global Variables -->
        <section>
          <h3>Global Variables</h3>
          <table class="cmp-table" style="font-size: 0.5em;">
            <tr>
              <th>Name</th>
              <th>Declaration</th>
              <th>Type</th>
              <th>Storage</th>
            </tr>
            <tr>
              <td style="color:#bd93f9;">M1</td>
              <td><code>#define M1 "How are ya, sweetie?"</code></td>
              <td>Macro (text replacement)</td>
              <td>String literal (read-only)</td>
            </tr>
            <tr>
              <td style="color:#8be9fd;">M2</td>
              <td><code>char M2[40] = "Beat the clock.";</code></td>
              <td>char array (size 40)</td>
              <td>Modifiable global array</td>
            </tr>
            <tr>
              <td style="color:#ffb86c;">M3</td>
              <td><code>char *M3 = "chat";</code></td>
              <td>char pointer</td>
              <td>Pointer to string literal</td>
            </tr>
          </table>
          <p class="explanation fragment">
            <code>M1</code> is replaced by the preprocessor. <code>M2</code> is a mutable array. <code>M3</code> is a pointer that can be reassigned.
          </p>
        </section>

        <!-- printf vs puts -->
        <section>
          <h3><code>printf</code> vs <code>puts</code></h3>
          <table class="cmp-table" style="font-size: 0.6em;">
            <tr>
              <th></th>
              <th><code>printf(str)</code></th>
              <th><code>puts(str)</code></th>
            </tr>
            <tr>
              <td style="color:#8be9fd;">Newline</td>
              <td style="color:#ff5555;">No &mdash; you must add <code>\n</code> yourself</td>
              <td style="color:#50fa7b;">Yes &mdash; always appends <code>\n</code></td>
            </tr>
            <tr>
              <td style="color:#8be9fd;">Format</td>
              <td>Supports <code>%d</code>, <code>%s</code>, etc.</td>
              <td>Just prints the string</td>
            </tr>
          </table>
        </section>

        <!-- Lines 9-10: printf(M1) then puts(M1) -->
        <section>
          <h3><code>printf(M1)</code> then <code>puts(M1)</code></h3>
          <pre style="font-size: 0.5em;"><code class="language-c" data-trim>
printf(M1);   // no '\n' at end!
puts(M1);     // appends '\n'
          </code></pre>
          <p style="font-size: 0.65em; margin-top: 15px;">
            <code>printf</code> prints the string <strong>without</strong> a newline, then <code>puts</code> prints the same string <strong>with</strong> a newline:
          </p>
          <div class="term-box">
            <span class="t-new">How are ya, sweetie?How are ya, sweetie?</span><br>
            <span class="t-label">&uarr; no newline between them &mdash; they run together on one line</span>
          </div>
        </section>

        <!-- Lines 11-12: puts(M2) and puts(M2+1) -->
        <section>
          <h3><code>puts(M2)</code> and <code>puts(M2+1)</code></h3>
          <pre style="font-size: 0.5em;"><code class="language-c" data-trim>
puts(M2);      // prints from M2[0]
puts(M2 + 1);  // prints from M2[1] — skips first char!
          </code></pre>
          <div class="str-mem" style="margin-top: 15px;">
            <div class="str-cell c-m2"><div class="str-val" style="color:#ff79c6;">B</div><div class="str-idx">M2</div></div>
            <div class="str-cell c-m2"><div class="str-val">e</div><div class="str-idx">M2+1</div></div>
            <div class="str-cell c-m2"><div class="str-val">a</div><div class="str-idx">[2]</div></div>
            <div class="str-cell c-m2"><div class="str-val">t</div><div class="str-idx">[3]</div></div>
            <div class="str-cell c-m2"><div class="str-val">␣</div><div class="str-idx">[4]</div></div>
            <div class="str-cell c-m2"><div class="str-val">t</div><div class="str-idx">[5]</div></div>
            <div class="str-cell c-m2"><div class="str-val">h</div><div class="str-idx">[6]</div></div>
            <div class="str-cell c-m2"><div class="str-val">e</div><div class="str-idx">[7]</div></div>
            <div class="str-cell c-m2"><div class="str-val">␣</div><div class="str-idx">[8]</div></div>
            <div class="str-cell c-m2"><div class="str-val">c</div><div class="str-idx">[9]</div></div>
            <div class="str-cell c-m2"><div class="str-val">l</div><div class="str-idx">[10]</div></div>
            <div class="str-cell c-m2"><div class="str-val">o</div><div class="str-idx">[11]</div></div>
            <div class="str-cell c-m2"><div class="str-val">c</div><div class="str-idx">[12]</div></div>
            <div class="str-cell c-m2"><div class="str-val">k</div><div class="str-idx">[13]</div></div>
            <div class="str-cell c-m2"><div class="str-val">.</div><div class="str-idx">[14]</div></div>
            <div class="str-cell c-null"><div class="str-val">\0</div><div class="str-idx">[15]</div></div>
          </div>
          <div style="display: flex; justify-content: center; gap: 30px; font-size: 0.6em; margin-top: 6px;">
            <span><code style="color:#ff79c6;">M2</code> &rarr; starts at [0]</span>
            <span><code style="color:#50fa7b;">M2+1</code> &rarr; starts at [1], skips 'B'</span>
          </div>
          <div class="term-box">
            <span class="t-hi">Beat the clock.</span><br>
            <span class="t-new">eat the clock.</span>
          </div>
        </section>

        <!-- fgets + strchr -->
        <section>
          <h3><code>fgets</code> + strip newline</h3>
          <pre style="font-size: 0.5em;"><code class="language-c" data-trim>
fgets(words, 80, stdin);  // user types: win a toy.⏎
if (p = strchr(words, '\n')) *p = '\0';
          </code></pre>
          <p style="font-size: 0.6em; color: #8be9fd; margin-top: 10px;"><code>fgets</code> reads the entire line <em>including</em> <code>\n</code>, then <code>strchr</code> finds it and replaces with <code>\0</code>:</p>
          <div class="str-mem">
            <div class="str-cell c-words"><div class="str-val">w</div><div class="str-idx">[0]</div></div>
            <div class="str-cell c-words"><div class="str-val">i</div><div class="str-idx">[1]</div></div>
            <div class="str-cell c-words"><div class="str-val">n</div><div class="str-idx">[2]</div></div>
            <div class="str-cell c-words"><div class="str-val">␣</div><div class="str-idx">[3]</div></div>
            <div class="str-cell c-words"><div class="str-val">a</div><div class="str-idx">[4]</div></div>
            <div class="str-cell c-words"><div class="str-val">␣</div><div class="str-idx">[5]</div></div>
            <div class="str-cell c-words"><div class="str-val">t</div><div class="str-idx">[6]</div></div>
            <div class="str-cell c-words"><div class="str-val">o</div><div class="str-idx">[7]</div></div>
            <div class="str-cell c-words"><div class="str-val">y</div><div class="str-idx">[8]</div></div>
            <div class="str-cell c-words"><div class="str-val">.</div><div class="str-idx">[9]</div></div>
            <div class="str-cell c-null"><div class="str-val">\0</div><div class="str-idx">[10]</div></div>
          </div>
          <div class="term-box" style="margin-top: 10px;">
            <span class="t-new">win a toy.</span>
          </div>
        </section>

        <!-- scanf into words+6: before -->
        <section>
          <h3><code>scanf("%s", words+6)</code></h3>
          <pre style="font-size: 0.5em;"><code class="language-c" data-trim>
scanf("%s", words + 6);  // user types: snoopy.
          </code></pre>
          <p style="font-size: 0.6em; color: #8be9fd; margin-top: 10px;"><code>words+6</code> points to index 6. <code>scanf</code> writes <code>"snoopy."</code> starting there.</p>
          <p style="font-size: 0.6em; color: #6272a4; margin-top: 15px;">Before:</p>
          <div class="str-mem" style="margin-top:4px;">
            <div class="str-cell c-words"><div class="str-val">w</div><div class="str-idx">[0]</div></div>
            <div class="str-cell c-words"><div class="str-val">i</div><div class="str-idx">[1]</div></div>
            <div class="str-cell c-words"><div class="str-val">n</div><div class="str-idx">[2]</div></div>
            <div class="str-cell c-words"><div class="str-val">␣</div><div class="str-idx">[3]</div></div>
            <div class="str-cell c-words"><div class="str-val">a</div><div class="str-idx">[4]</div></div>
            <div class="str-cell c-words"><div class="str-val">␣</div><div class="str-idx">[5]</div></div>
            <div class="str-cell c-words" style="opacity:0.5;"><div class="str-val">t</div><div class="str-idx">[6]</div></div>
            <div class="str-cell c-words" style="opacity:0.5;"><div class="str-val">o</div><div class="str-idx">[7]</div></div>
            <div class="str-cell c-words" style="opacity:0.5;"><div class="str-val">y</div><div class="str-idx">[8]</div></div>
            <div class="str-cell c-words" style="opacity:0.5;"><div class="str-val">.</div><div class="str-idx">[9]</div></div>
            <div class="str-cell c-null" style="opacity:0.5;"><div class="str-val">\0</div><div class="str-idx">[10]</div></div>
          </div>
          <p class="explanation"><code>scanf("%s", ...)</code> reads one word (stops at whitespace) and writes it at the given address.</p>
        </section>

        <!-- scanf into words+6: after -->
        <section>
          <h3><code>puts(words)</code> after scanf</h3>
          <p style="font-size: 0.6em; color: #6272a4;">After <code>scanf</code> writes <code>"snoopy."</code> at index 6:</p>
          <div class="str-mem" style="margin-top:8px;">
            <div class="str-cell c-words"><div class="str-val">w</div><div class="str-idx">[0]</div></div>
            <div class="str-cell c-words"><div class="str-val">i</div><div class="str-idx">[1]</div></div>
            <div class="str-cell c-words"><div class="str-val">n</div><div class="str-idx">[2]</div></div>
            <div class="str-cell c-words"><div class="str-val">␣</div><div class="str-idx">[3]</div></div>
            <div class="str-cell c-words"><div class="str-val">a</div><div class="str-idx">[4]</div></div>
            <div class="str-cell c-words"><div class="str-val">␣</div><div class="str-idx">[5]</div></div>
            <div class="str-cell c-over"><div class="str-val" style="color:#50fa7b;">s</div><div class="str-idx">[6]</div></div>
            <div class="str-cell c-over"><div class="str-val" style="color:#50fa7b;">n</div><div class="str-idx">[7]</div></div>
            <div class="str-cell c-over"><div class="str-val" style="color:#50fa7b;">o</div><div class="str-idx">[8]</div></div>
            <div class="str-cell c-over"><div class="str-val" style="color:#50fa7b;">o</div><div class="str-idx">[9]</div></div>
            <div class="str-cell c-over"><div class="str-val" style="color:#50fa7b;">p</div><div class="str-idx">[10]</div></div>
            <div class="str-cell c-over"><div class="str-val" style="color:#50fa7b;">y</div><div class="str-idx">[11]</div></div>
            <div class="str-cell c-over"><div class="str-val" style="color:#50fa7b;">.</div><div class="str-idx">[12]</div></div>
            <div class="str-cell c-null"><div class="str-val">\0</div><div class="str-idx">[13]</div></div>
          </div>
          <div class="term-box" style="margin-top: 12px;">
            <span class="t-new">win a snoopy.</span>
          </div>
          <p class="explanation"><code>"snoopy."</code> overwrites <code>"toy."</code> starting at index 6. The front part <code>"win a "</code> is untouched.</p>
        </section>

        <!-- words[3] = '\0' -->
        <section>
          <h3><code>words[3] = '\0'</code></h3>
          <pre style="font-size: 0.5em;"><code class="language-c" data-trim>
words[3] = '\0';
puts(words);
          </code></pre>
          <div class="str-mem" style="margin-top: 15px;">
            <div class="str-cell c-words"><div class="str-val">w</div><div class="str-idx">[0]</div></div>
            <div class="str-cell c-words"><div class="str-val">i</div><div class="str-idx">[1]</div></div>
            <div class="str-cell c-words"><div class="str-val">n</div><div class="str-idx">[2]</div></div>
            <div class="str-cell c-null"><div class="str-val">\0</div><div class="str-idx">[3]</div></div>
            <div class="str-cell c-words c-dim"><div class="str-val">a</div><div class="str-idx">[4]</div></div>
            <div class="str-cell c-words c-dim"><div class="str-val">␣</div><div class="str-idx">[5]</div></div>
            <div class="str-cell c-over c-dim"><div class="str-val">s</div><div class="str-idx">[6]</div></div>
            <div class="str-cell c-over c-dim"><div class="str-val">n</div><div class="str-idx">[7]</div></div>
            <div class="str-cell c-over c-dim"><div class="str-val">o</div><div class="str-idx">[8]</div></div>
            <div class="str-cell c-over c-dim"><div class="str-val">...</div></div>
          </div>
          <div class="term-box">
            <span class="t-new">win</span>
          </div>
          <p class="explanation">Same idea as <code>test.c</code> &mdash; inserting <code>\0</code> truncates the visible string.</p>
        </section>

        <!-- while (*M3) puts(M3++) -->
        <section>
          <h3><code>while (*M3) puts(M3++)</code></h3>
          <p style="font-size: 0.6em; color: #8be9fd;">M3 initially points to <code>"chat"</code>. Each iteration prints from M3, then advances the pointer.</p>
          <div class="str-mem" style="margin-top: 12px;">
            <div class="str-cell c-m3"><div class="str-val">c</div><div class="str-idx">[0]</div></div>
            <div class="str-cell c-m3"><div class="str-val">h</div><div class="str-idx">[1]</div></div>
            <div class="str-cell c-m3"><div class="str-val">a</div><div class="str-idx">[2]</div></div>
            <div class="str-cell c-m3"><div class="str-val">t</div><div class="str-idx">[3]</div></div>
            <div class="str-cell c-null"><div class="str-val">\0</div><div class="str-idx">[4]</div></div>
          </div>
          <table class="cmp-table fragment" style="font-size: 0.5em; margin-top: 12px;">
            <tr>
              <th>Iter</th>
              <th><code>*M3</code></th>
              <th>M3 points to</th>
              <th><code>puts</code> output</th>
              <th>After <code>M3++</code></th>
            </tr>
            <tr>
              <td>1</td>
              <td>'c'</td>
              <td style="color:#ffb86c;">&rarr; [0]</td>
              <td style="color:#50fa7b;">chat</td>
              <td>M3 &rarr; [1]</td>
            </tr>
            <tr>
              <td>2</td>
              <td>'h'</td>
              <td style="color:#ffb86c;">&rarr; [1]</td>
              <td style="color:#50fa7b;">hat</td>
              <td>M3 &rarr; [2]</td>
            </tr>
            <tr>
              <td>3</td>
              <td>'a'</td>
              <td style="color:#ffb86c;">&rarr; [2]</td>
              <td style="color:#50fa7b;">at</td>
              <td>M3 &rarr; [3]</td>
            </tr>
            <tr>
              <td>4</td>
              <td>'t'</td>
              <td style="color:#ffb86c;">&rarr; [3]</td>
              <td style="color:#50fa7b;">t</td>
              <td>M3 &rarr; [4]</td>
            </tr>
            <tr>
              <td>exit</td>
              <td style="color:#ff5555;">'\0'</td>
              <td style="color:#ffb86c;">&rarr; [4]</td>
              <td colspan="2" style="color:#6272a4;">&mdash; loop ends</td>
            </tr>
          </table>
          <p class="explanation fragment"><code>M3++</code> is post-increment: <code>puts</code> gets the <em>current</em> value, then M3 moves forward.</p>
        </section>

        <!-- puts(--M3) twice -->
        <section>
          <h3><code>puts(--M3)</code> twice</h3>
          <p style="font-size: 0.6em; color: #8be9fd;">After the loop, M3 points to <code>\0</code> at index [4]. Now we go backwards:</p>
          <div class="str-mem" style="margin-top: 12px;">
            <div class="str-cell c-m3"><div class="str-val">c</div><div class="str-idx">[0]</div></div>
            <div class="str-cell c-m3"><div class="str-val">h</div><div class="str-idx">[1]</div></div>
            <div class="str-cell c-m3"><div class="str-val">a</div><div class="str-idx">[2]</div></div>
            <div class="str-cell c-m3"><div class="str-val">t</div><div class="str-idx">[3]</div></div>
            <div class="str-cell c-null"><div class="str-val">\0</div><div class="str-idx">[4] &larr; M3</div></div>
          </div>
          <div style="font-size: 0.65em; max-width: 650px; margin: 15px auto; text-align: left;">
            <p class="fragment">
              <code>puts(--M3)</code>: M3 moves to <span style="color:#ffb86c;">[3]</span> first, prints from 't' &rarr; <strong style="color:#50fa7b;">"t"</strong>
            </p>
            <p class="fragment">
              <code>puts(--M3)</code>: M3 moves to <span style="color:#ffb86c;">[2]</span> first, prints from 'a' &rarr; <strong style="color:#50fa7b;">"at"</strong>
            </p>
          </div>
          <p class="explanation fragment"><code>--M3</code> is pre-decrement: M3 moves <em>before</em> <code>puts</code> reads it.</p>
        </section>

        <!-- M3 = M1, puts(M3) -->
        <section>
          <h3><code>M3 = M1</code></h3>
          <pre style="font-size: 0.5em;"><code class="language-c" data-trim>
M3 = M1;   // M3 now points to "How are ya, sweetie?"
puts(M3);
          </code></pre>
          <p style="font-size: 0.65em; margin-top: 15px;">
            <code>M3</code> is a <code>char *</code> &mdash; we can reassign it to point to any string.
          </p>
          <p style="font-size: 0.65em; margin-top: 5px;">
            <code>M1</code> is a macro that expands to the string literal <code style="color:#bd93f9;">"How are ya, sweetie?"</code>.
          </p>
          <div class="term-box" style="margin-top: 15px;">
            <span class="t-new">How are ya, sweetie?</span>
          </div>
        </section>

        <!-- Complete Output -->
        <section>
          <h3>Complete Output</h3>
          <div class="term-box" style="font-size: 0.65em; line-height: 1.6;">
            <span>How are ya, sweetie?How are ya, sweetie?</span><br>
            <span>Beat the clock.</span><br>
            <span>eat the clock.</span><br>
            <span>win a toy.</span><br>
            <span>win a snoopy.</span><br>
            <span>win</span><br>
            <span>chat</span><br>
            <span>hat</span><br>
            <span>at</span><br>
            <span>t</span><br>
            <span>t</span><br>
            <span>at</span><br>
            <span>How are ya, sweetie?</span>
          </div>
        </section>
      </section>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.2.1/reveal.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.2.1/plugin/notes/notes.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.2.1/plugin/markdown/markdown.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.2.1/plugin/highlight/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/5.2.1/plugin/math/math.min.js"></script>

  <script>
    Reveal.initialize({
      hash: true,
      transition: 'slide',
      plugins: [RevealMarkdown, RevealHighlight, RevealNotes, RevealMath.KaTeX]
    });
  </script>
</body>

</html>
